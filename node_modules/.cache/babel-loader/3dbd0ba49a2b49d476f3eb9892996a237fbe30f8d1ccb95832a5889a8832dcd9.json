{"ast":null,"code":"\"use client\";\n\n// packages/react/form/src/Form.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { Label as LabelPrimitive } from \"@radix-ui/react-label\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx } from \"react/jsx-runtime\";\nvar [createFormContext, createFormScope] = createContextScope(\"Form\");\nvar FORM_NAME = \"Form\";\nvar [ValidationProvider, useValidationContext] = createFormContext(FORM_NAME);\nvar [AriaDescriptionProvider, useAriaDescriptionContext] = createFormContext(FORM_NAME);\nvar Form = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    onClearServerErrors = () => {},\n    ...rootProps\n  } = props;\n  const formRef = React.useRef(null);\n  const composedFormRef = useComposedRefs(forwardedRef, formRef);\n  const [validityMap, setValidityMap] = React.useState({});\n  const getFieldValidity = React.useCallback(fieldName => validityMap[fieldName], [validityMap]);\n  const handleFieldValidityChange = React.useCallback((fieldName, validity) => setValidityMap(prevValidityMap => ({\n    ...prevValidityMap,\n    [fieldName]: {\n      ...(prevValidityMap[fieldName] ?? {}),\n      ...validity\n    }\n  })), []);\n  const handleFieldValiditionClear = React.useCallback(fieldName => {\n    setValidityMap(prevValidityMap => ({\n      ...prevValidityMap,\n      [fieldName]: void 0\n    }));\n    setCustomErrorsMap(prevCustomErrorsMap => ({\n      ...prevCustomErrorsMap,\n      [fieldName]: {}\n    }));\n  }, []);\n  const [customMatcherEntriesMap, setCustomMatcherEntriesMap] = React.useState({});\n  const getFieldCustomMatcherEntries = React.useCallback(fieldName => customMatcherEntriesMap[fieldName] ?? [], [customMatcherEntriesMap]);\n  const handleFieldCustomMatcherAdd = React.useCallback((fieldName, matcherEntry) => {\n    setCustomMatcherEntriesMap(prevCustomMatcherEntriesMap => ({\n      ...prevCustomMatcherEntriesMap,\n      [fieldName]: [...(prevCustomMatcherEntriesMap[fieldName] ?? []), matcherEntry]\n    }));\n  }, []);\n  const handleFieldCustomMatcherRemove = React.useCallback((fieldName, matcherEntryId) => {\n    setCustomMatcherEntriesMap(prevCustomMatcherEntriesMap => ({\n      ...prevCustomMatcherEntriesMap,\n      [fieldName]: (prevCustomMatcherEntriesMap[fieldName] ?? []).filter(matcherEntry => matcherEntry.id !== matcherEntryId)\n    }));\n  }, []);\n  const [customErrorsMap, setCustomErrorsMap] = React.useState({});\n  const getFieldCustomErrors = React.useCallback(fieldName => customErrorsMap[fieldName] ?? {}, [customErrorsMap]);\n  const handleFieldCustomErrorsChange = React.useCallback((fieldName, customErrors) => {\n    setCustomErrorsMap(prevCustomErrorsMap => ({\n      ...prevCustomErrorsMap,\n      [fieldName]: {\n        ...(prevCustomErrorsMap[fieldName] ?? {}),\n        ...customErrors\n      }\n    }));\n  }, []);\n  const [messageIdsMap, setMessageIdsMap] = React.useState({});\n  const handleFieldMessageIdAdd = React.useCallback((fieldName, id) => {\n    setMessageIdsMap(prevMessageIdsMap => {\n      const fieldDescriptionIds = new Set(prevMessageIdsMap[fieldName]).add(id);\n      return {\n        ...prevMessageIdsMap,\n        [fieldName]: fieldDescriptionIds\n      };\n    });\n  }, []);\n  const handleFieldMessageIdRemove = React.useCallback((fieldName, id) => {\n    setMessageIdsMap(prevMessageIdsMap => {\n      const fieldDescriptionIds = new Set(prevMessageIdsMap[fieldName]);\n      fieldDescriptionIds.delete(id);\n      return {\n        ...prevMessageIdsMap,\n        [fieldName]: fieldDescriptionIds\n      };\n    });\n  }, []);\n  const getFieldDescription = React.useCallback(fieldName => Array.from(messageIdsMap[fieldName] ?? []).join(\" \") || void 0, [messageIdsMap]);\n  return /* @__PURE__ */jsx(ValidationProvider, {\n    scope: __scopeForm,\n    getFieldValidity,\n    onFieldValidityChange: handleFieldValidityChange,\n    getFieldCustomMatcherEntries,\n    onFieldCustomMatcherEntryAdd: handleFieldCustomMatcherAdd,\n    onFieldCustomMatcherEntryRemove: handleFieldCustomMatcherRemove,\n    getFieldCustomErrors,\n    onFieldCustomErrorsChange: handleFieldCustomErrorsChange,\n    onFieldValiditionClear: handleFieldValiditionClear,\n    children: /* @__PURE__ */jsx(AriaDescriptionProvider, {\n      scope: __scopeForm,\n      onFieldMessageIdAdd: handleFieldMessageIdAdd,\n      onFieldMessageIdRemove: handleFieldMessageIdRemove,\n      getFieldDescription,\n      children: /* @__PURE__ */jsx(Primitive.form, {\n        ...rootProps,\n        ref: composedFormRef,\n        onInvalid: composeEventHandlers(props.onInvalid, event => {\n          const firstInvalidControl = getFirstInvalidControl(event.currentTarget);\n          if (firstInvalidControl === event.target) firstInvalidControl.focus();\n          event.preventDefault();\n        }),\n        onSubmit: composeEventHandlers(props.onSubmit, onClearServerErrors, {\n          checkForDefaultPrevented: false\n        }),\n        onReset: composeEventHandlers(props.onReset, onClearServerErrors)\n      })\n    })\n  });\n});\nForm.displayName = FORM_NAME;\nvar FIELD_NAME = \"FormField\";\nvar [FormFieldProvider, useFormFieldContext] = createFormContext(FIELD_NAME);\nvar FormField = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    name,\n    serverInvalid = false,\n    ...fieldProps\n  } = props;\n  const validationContext = useValidationContext(FIELD_NAME, __scopeForm);\n  const validity = validationContext.getFieldValidity(name);\n  const id = useId();\n  return /* @__PURE__ */jsx(FormFieldProvider, {\n    scope: __scopeForm,\n    id,\n    name,\n    serverInvalid,\n    children: /* @__PURE__ */jsx(Primitive.div, {\n      \"data-valid\": getValidAttribute(validity, serverInvalid),\n      \"data-invalid\": getInvalidAttribute(validity, serverInvalid),\n      ...fieldProps,\n      ref: forwardedRef\n    })\n  });\n});\nFormField.displayName = FIELD_NAME;\nvar LABEL_NAME = \"FormLabel\";\nvar FormLabel = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    ...labelProps\n  } = props;\n  const validationContext = useValidationContext(LABEL_NAME, __scopeForm);\n  const fieldContext = useFormFieldContext(LABEL_NAME, __scopeForm);\n  const htmlFor = labelProps.htmlFor || fieldContext.id;\n  const validity = validationContext.getFieldValidity(fieldContext.name);\n  return /* @__PURE__ */jsx(LabelPrimitive, {\n    \"data-valid\": getValidAttribute(validity, fieldContext.serverInvalid),\n    \"data-invalid\": getInvalidAttribute(validity, fieldContext.serverInvalid),\n    ...labelProps,\n    ref: forwardedRef,\n    htmlFor\n  });\n});\nFormLabel.displayName = LABEL_NAME;\nvar CONTROL_NAME = \"FormControl\";\nvar FormControl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    ...controlProps\n  } = props;\n  const validationContext = useValidationContext(CONTROL_NAME, __scopeForm);\n  const fieldContext = useFormFieldContext(CONTROL_NAME, __scopeForm);\n  const ariaDescriptionContext = useAriaDescriptionContext(CONTROL_NAME, __scopeForm);\n  const ref = React.useRef(null);\n  const composedRef = useComposedRefs(forwardedRef, ref);\n  const name = controlProps.name || fieldContext.name;\n  const id = controlProps.id || fieldContext.id;\n  const customMatcherEntries = validationContext.getFieldCustomMatcherEntries(name);\n  const {\n    onFieldValidityChange,\n    onFieldCustomErrorsChange,\n    onFieldValiditionClear\n  } = validationContext;\n  const updateControlValidity = React.useCallback(async control => {\n    if (hasBuiltInError(control.validity)) {\n      const controlValidity2 = validityStateToObject(control.validity);\n      onFieldValidityChange(name, controlValidity2);\n      return;\n    }\n    const formData = control.form ? new FormData(control.form) : new FormData();\n    const matcherArgs = [control.value, formData];\n    const syncCustomMatcherEntries = [];\n    const ayncCustomMatcherEntries = [];\n    customMatcherEntries.forEach(customMatcherEntry => {\n      if (isAsyncCustomMatcherEntry(customMatcherEntry, matcherArgs)) {\n        ayncCustomMatcherEntries.push(customMatcherEntry);\n      } else if (isSyncCustomMatcherEntry(customMatcherEntry)) {\n        syncCustomMatcherEntries.push(customMatcherEntry);\n      }\n    });\n    const syncCustomErrors = syncCustomMatcherEntries.map(({\n      id: id2,\n      match\n    }) => {\n      return [id2, match(...matcherArgs)];\n    });\n    const syncCustomErrorsById = Object.fromEntries(syncCustomErrors);\n    const hasSyncCustomErrors = Object.values(syncCustomErrorsById).some(Boolean);\n    const hasCustomError = hasSyncCustomErrors;\n    control.setCustomValidity(hasCustomError ? DEFAULT_INVALID_MESSAGE : \"\");\n    const controlValidity = validityStateToObject(control.validity);\n    onFieldValidityChange(name, controlValidity);\n    onFieldCustomErrorsChange(name, syncCustomErrorsById);\n    if (!hasSyncCustomErrors && ayncCustomMatcherEntries.length > 0) {\n      const promisedCustomErrors = ayncCustomMatcherEntries.map(({\n        id: id2,\n        match\n      }) => match(...matcherArgs).then(matches => [id2, matches]));\n      const asyncCustomErrors = await Promise.all(promisedCustomErrors);\n      const asyncCustomErrorsById = Object.fromEntries(asyncCustomErrors);\n      const hasAsyncCustomErrors = Object.values(asyncCustomErrorsById).some(Boolean);\n      const hasCustomError2 = hasAsyncCustomErrors;\n      control.setCustomValidity(hasCustomError2 ? DEFAULT_INVALID_MESSAGE : \"\");\n      const controlValidity2 = validityStateToObject(control.validity);\n      onFieldValidityChange(name, controlValidity2);\n      onFieldCustomErrorsChange(name, asyncCustomErrorsById);\n    }\n  }, [customMatcherEntries, name, onFieldCustomErrorsChange, onFieldValidityChange]);\n  React.useEffect(() => {\n    const control = ref.current;\n    if (control) {\n      const handleChange = () => updateControlValidity(control);\n      control.addEventListener(\"change\", handleChange);\n      return () => control.removeEventListener(\"change\", handleChange);\n    }\n  }, [updateControlValidity]);\n  const resetControlValidity = React.useCallback(() => {\n    const control = ref.current;\n    if (control) {\n      control.setCustomValidity(\"\");\n      onFieldValiditionClear(name);\n    }\n  }, [name, onFieldValiditionClear]);\n  React.useEffect(() => {\n    const form = ref.current?.form;\n    if (form) {\n      form.addEventListener(\"reset\", resetControlValidity);\n      return () => form.removeEventListener(\"reset\", resetControlValidity);\n    }\n  }, [resetControlValidity]);\n  React.useEffect(() => {\n    const control = ref.current;\n    const form = control?.closest(\"form\");\n    if (form && fieldContext.serverInvalid) {\n      const firstInvalidControl = getFirstInvalidControl(form);\n      if (firstInvalidControl === control) firstInvalidControl.focus();\n    }\n  }, [fieldContext.serverInvalid]);\n  const validity = validationContext.getFieldValidity(name);\n  return /* @__PURE__ */jsx(Primitive.input, {\n    \"data-valid\": getValidAttribute(validity, fieldContext.serverInvalid),\n    \"data-invalid\": getInvalidAttribute(validity, fieldContext.serverInvalid),\n    \"aria-invalid\": fieldContext.serverInvalid ? true : void 0,\n    \"aria-describedby\": ariaDescriptionContext.getFieldDescription(name),\n    title: \"\",\n    ...controlProps,\n    ref: composedRef,\n    id,\n    name,\n    onInvalid: composeEventHandlers(props.onInvalid, event => {\n      const control = event.currentTarget;\n      updateControlValidity(control);\n    }),\n    onChange: composeEventHandlers(props.onChange, event => {\n      resetControlValidity();\n    })\n  });\n});\nFormControl.displayName = CONTROL_NAME;\nvar DEFAULT_INVALID_MESSAGE = \"This value is not valid\";\nvar DEFAULT_BUILT_IN_MESSAGES = {\n  badInput: DEFAULT_INVALID_MESSAGE,\n  patternMismatch: \"This value does not match the required pattern\",\n  rangeOverflow: \"This value is too large\",\n  rangeUnderflow: \"This value is too small\",\n  stepMismatch: \"This value does not match the required step\",\n  tooLong: \"This value is too long\",\n  tooShort: \"This value is too short\",\n  typeMismatch: \"This value does not match the required type\",\n  valid: void 0,\n  valueMissing: \"This value is missing\"\n};\nvar MESSAGE_NAME = \"FormMessage\";\nvar FormMessage = React.forwardRef((props, forwardedRef) => {\n  const {\n    match,\n    name: nameProp,\n    ...messageProps\n  } = props;\n  const fieldContext = useFormFieldContext(MESSAGE_NAME, props.__scopeForm);\n  const name = nameProp ?? fieldContext.name;\n  if (match === void 0) {\n    return /* @__PURE__ */jsx(FormMessageImpl, {\n      ...messageProps,\n      ref: forwardedRef,\n      name,\n      children: props.children || DEFAULT_INVALID_MESSAGE\n    });\n  } else if (typeof match === \"function\") {\n    return /* @__PURE__ */jsx(FormCustomMessage, {\n      match,\n      ...messageProps,\n      ref: forwardedRef,\n      name\n    });\n  } else {\n    return /* @__PURE__ */jsx(FormBuiltInMessage, {\n      match,\n      ...messageProps,\n      ref: forwardedRef,\n      name\n    });\n  }\n});\nFormMessage.displayName = MESSAGE_NAME;\nvar FormBuiltInMessage = React.forwardRef((props, forwardedRef) => {\n  const {\n    match,\n    forceMatch = false,\n    name,\n    children,\n    ...messageProps\n  } = props;\n  const validationContext = useValidationContext(MESSAGE_NAME, messageProps.__scopeForm);\n  const validity = validationContext.getFieldValidity(name);\n  const matches = forceMatch || validity?.[match];\n  if (matches) {\n    return /* @__PURE__ */jsx(FormMessageImpl, {\n      ref: forwardedRef,\n      ...messageProps,\n      name,\n      children: children ?? DEFAULT_BUILT_IN_MESSAGES[match]\n    });\n  }\n  return null;\n});\nvar FormCustomMessage = React.forwardRef((props, forwardedRef) => {\n  const {\n    match,\n    forceMatch = false,\n    name,\n    id: idProp,\n    children,\n    ...messageProps\n  } = props;\n  const validationContext = useValidationContext(MESSAGE_NAME, messageProps.__scopeForm);\n  const ref = React.useRef(null);\n  const composedRef = useComposedRefs(forwardedRef, ref);\n  const _id = useId();\n  const id = idProp ?? _id;\n  const customMatcherEntry = React.useMemo(() => ({\n    id,\n    match\n  }), [id, match]);\n  const {\n    onFieldCustomMatcherEntryAdd,\n    onFieldCustomMatcherEntryRemove\n  } = validationContext;\n  React.useEffect(() => {\n    onFieldCustomMatcherEntryAdd(name, customMatcherEntry);\n    return () => onFieldCustomMatcherEntryRemove(name, customMatcherEntry.id);\n  }, [customMatcherEntry, name, onFieldCustomMatcherEntryAdd, onFieldCustomMatcherEntryRemove]);\n  const validity = validationContext.getFieldValidity(name);\n  const customErrors = validationContext.getFieldCustomErrors(name);\n  const hasMatchingCustomError = customErrors[id];\n  const matches = forceMatch || validity && !hasBuiltInError(validity) && hasMatchingCustomError;\n  if (matches) {\n    return /* @__PURE__ */jsx(FormMessageImpl, {\n      id,\n      ref: composedRef,\n      ...messageProps,\n      name,\n      children: children ?? DEFAULT_INVALID_MESSAGE\n    });\n  }\n  return null;\n});\nvar FormMessageImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    id: idProp,\n    name,\n    ...messageProps\n  } = props;\n  const ariaDescriptionContext = useAriaDescriptionContext(MESSAGE_NAME, __scopeForm);\n  const _id = useId();\n  const id = idProp ?? _id;\n  const {\n    onFieldMessageIdAdd,\n    onFieldMessageIdRemove\n  } = ariaDescriptionContext;\n  React.useEffect(() => {\n    onFieldMessageIdAdd(name, id);\n    return () => onFieldMessageIdRemove(name, id);\n  }, [name, id, onFieldMessageIdAdd, onFieldMessageIdRemove]);\n  return /* @__PURE__ */jsx(Primitive.span, {\n    id,\n    ...messageProps,\n    ref: forwardedRef\n  });\n});\nvar VALIDITY_STATE_NAME = \"FormValidityState\";\nvar FormValidityState = props => {\n  const {\n    __scopeForm,\n    name: nameProp,\n    children\n  } = props;\n  const validationContext = useValidationContext(VALIDITY_STATE_NAME, __scopeForm);\n  const fieldContext = useFormFieldContext(VALIDITY_STATE_NAME, __scopeForm);\n  const name = nameProp ?? fieldContext.name;\n  const validity = validationContext.getFieldValidity(name);\n  return /* @__PURE__ */jsx(Fragment, {\n    children: children(validity)\n  });\n};\nFormValidityState.displayName = VALIDITY_STATE_NAME;\nvar SUBMIT_NAME = \"FormSubmit\";\nvar FormSubmit = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeForm,\n    ...submitProps\n  } = props;\n  return /* @__PURE__ */jsx(Primitive.button, {\n    type: \"submit\",\n    ...submitProps,\n    ref: forwardedRef\n  });\n});\nFormSubmit.displayName = SUBMIT_NAME;\nfunction validityStateToObject(validity) {\n  const object = {};\n  for (const key in validity) {\n    object[key] = validity[key];\n  }\n  return object;\n}\nfunction isHTMLElement(element) {\n  return element instanceof HTMLElement;\n}\nfunction isFormControl(element) {\n  return \"validity\" in element;\n}\nfunction isInvalid(control) {\n  return isFormControl(control) && (control.validity.valid === false || control.getAttribute(\"aria-invalid\") === \"true\");\n}\nfunction getFirstInvalidControl(form) {\n  const elements = form.elements;\n  const [firstInvalidControl] = Array.from(elements).filter(isHTMLElement).filter(isInvalid);\n  return firstInvalidControl;\n}\nfunction isAsyncCustomMatcherEntry(entry, args) {\n  return entry.match.constructor.name === \"AsyncFunction\" || returnsPromise(entry.match, args);\n}\nfunction isSyncCustomMatcherEntry(entry) {\n  return entry.match.constructor.name === \"Function\";\n}\nfunction returnsPromise(func, args) {\n  return func(...args) instanceof Promise;\n}\nfunction hasBuiltInError(validity) {\n  let error = false;\n  for (const validityKey in validity) {\n    const key = validityKey;\n    if (key !== \"valid\" && key !== \"customError\" && validity[key]) {\n      error = true;\n      break;\n    }\n  }\n  return error;\n}\nfunction getValidAttribute(validity, serverInvalid) {\n  if (validity?.valid === true && !serverInvalid) return true;\n  return void 0;\n}\nfunction getInvalidAttribute(validity, serverInvalid) {\n  if (validity?.valid === false || serverInvalid) return true;\n  return void 0;\n}\nvar Root = Form;\nvar Field = FormField;\nvar Label = FormLabel;\nvar Control = FormControl;\nvar Message = FormMessage;\nvar ValidityState = FormValidityState;\nvar Submit = FormSubmit;\nexport { Control, Field, Form, FormControl, FormField, FormLabel, FormMessage, FormSubmit, FormValidityState, Label, Message, Root, Submit, ValidityState, createFormScope };","map":{"version":3,"names":["React","composeEventHandlers","useComposedRefs","createContextScope","useId","Label","LabelPrimitive","Primitive","Fragment","jsx","createFormContext","createFormScope","FORM_NAME","ValidationProvider","useValidationContext","AriaDescriptionProvider","useAriaDescriptionContext","Form","forwardRef","props","forwardedRef","__scopeForm","onClearServerErrors","rootProps","formRef","useRef","composedFormRef","validityMap","setValidityMap","useState","getFieldValidity","useCallback","fieldName","handleFieldValidityChange","validity","prevValidityMap","handleFieldValiditionClear","setCustomErrorsMap","prevCustomErrorsMap","customMatcherEntriesMap","setCustomMatcherEntriesMap","getFieldCustomMatcherEntries","handleFieldCustomMatcherAdd","matcherEntry","prevCustomMatcherEntriesMap","handleFieldCustomMatcherRemove","matcherEntryId","filter","id","customErrorsMap","getFieldCustomErrors","handleFieldCustomErrorsChange","customErrors","messageIdsMap","setMessageIdsMap","handleFieldMessageIdAdd","prevMessageIdsMap","fieldDescriptionIds","Set","add","handleFieldMessageIdRemove","delete","getFieldDescription","Array","from","join","scope","onFieldValidityChange","onFieldCustomMatcherEntryAdd","onFieldCustomMatcherEntryRemove","onFieldCustomErrorsChange","onFieldValiditionClear","children","onFieldMessageIdAdd","onFieldMessageIdRemove","form","ref","onInvalid","event","firstInvalidControl","getFirstInvalidControl","currentTarget","target","focus","preventDefault","onSubmit","checkForDefaultPrevented","onReset","displayName","FIELD_NAME","FormFieldProvider","useFormFieldContext","FormField","name","serverInvalid","fieldProps","validationContext","div","getValidAttribute","getInvalidAttribute","LABEL_NAME","FormLabel","labelProps","fieldContext","htmlFor","CONTROL_NAME","FormControl","controlProps","ariaDescriptionContext","composedRef","customMatcherEntries","updateControlValidity","control","hasBuiltInError","controlValidity2","validityStateToObject","formData","FormData","matcherArgs","value","syncCustomMatcherEntries","ayncCustomMatcherEntries","forEach","customMatcherEntry","isAsyncCustomMatcherEntry","push","isSyncCustomMatcherEntry","syncCustomErrors","map","id2","match","syncCustomErrorsById","Object","fromEntries","hasSyncCustomErrors","values","some","Boolean","hasCustomError","setCustomValidity","DEFAULT_INVALID_MESSAGE","controlValidity","length","promisedCustomErrors","then","matches","asyncCustomErrors","Promise","all","asyncCustomErrorsById","hasAsyncCustomErrors","hasCustomError2","useEffect","current","handleChange","addEventListener","removeEventListener","resetControlValidity","closest","input","title","onChange","DEFAULT_BUILT_IN_MESSAGES","badInput","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valid","valueMissing","MESSAGE_NAME","FormMessage","nameProp","messageProps","FormMessageImpl","FormCustomMessage","FormBuiltInMessage","forceMatch","idProp","_id","useMemo","hasMatchingCustomError","span","VALIDITY_STATE_NAME","FormValidityState","SUBMIT_NAME","FormSubmit","submitProps","button","type","object","key","isHTMLElement","element","HTMLElement","isFormControl","isInvalid","getAttribute","elements","entry","args","constructor","returnsPromise","func","error","validityKey","Root","Field","Control","Message","ValidityState","Submit"],"sources":["/Users/danielcross/bootcamp/mod-20/daniel-cross-portfolio/node_modules/@radix-ui/react-form/src/Form.tsx"],"sourcesContent":["import * as React from 'react';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContextScope } from '@radix-ui/react-context';\nimport { useId } from '@radix-ui/react-id';\nimport { Label as LabelPrimitive } from '@radix-ui/react-label';\nimport { Primitive } from '@radix-ui/react-primitive';\n\nimport type { Scope } from '@radix-ui/react-context';\n\ntype ScopedProps<P> = P & { __scopeForm?: Scope };\nconst [createFormContext, createFormScope] = createContextScope('Form');\n\n/* -------------------------------------------------------------------------------------------------\n * Form\n * -----------------------------------------------------------------------------------------------*/\n\nconst FORM_NAME = 'Form';\n\ntype ValidityMap = { [fieldName: string]: ValidityState | undefined };\ntype CustomMatcherEntriesMap = { [fieldName: string]: CustomMatcherEntry[] };\ntype CustomErrorsMap = { [fieldName: string]: Record<string, boolean> };\n\ntype ValidationContextValue = {\n  getFieldValidity(fieldName: string): ValidityState | undefined;\n  onFieldValidityChange(fieldName: string, validity: ValidityState): void;\n\n  getFieldCustomMatcherEntries(fieldName: string): CustomMatcherEntry[];\n  onFieldCustomMatcherEntryAdd(fieldName: string, matcherEntry: CustomMatcherEntry): void;\n  onFieldCustomMatcherEntryRemove(fieldName: string, matcherEntryId: string): void;\n\n  getFieldCustomErrors(fieldName: string): Record<string, boolean>;\n  onFieldCustomErrorsChange(fieldName: string, errors: Record<string, boolean>): void;\n\n  onFieldValiditionClear(fieldName: string): void;\n};\nconst [ValidationProvider, useValidationContext] =\n  createFormContext<ValidationContextValue>(FORM_NAME);\n\ntype MessageIdsMap = { [fieldName: string]: Set<string> };\n\ntype AriaDescriptionContextValue = {\n  onFieldMessageIdAdd(fieldName: string, id: string): void;\n  onFieldMessageIdRemove(fieldName: string, id: string): void;\n  getFieldDescription(fieldName: string): string | undefined;\n};\nconst [AriaDescriptionProvider, useAriaDescriptionContext] =\n  createFormContext<AriaDescriptionContextValue>(FORM_NAME);\n\ntype FormElement = React.ElementRef<typeof Primitive.form>;\ntype PrimitiveFormProps = React.ComponentPropsWithoutRef<typeof Primitive.form>;\ninterface FormProps extends PrimitiveFormProps {\n  onClearServerErrors?(): void;\n}\n\nconst Form = React.forwardRef<FormElement, FormProps>(\n  (props: ScopedProps<FormProps>, forwardedRef) => {\n    const { __scopeForm, onClearServerErrors = () => {}, ...rootProps } = props;\n    const formRef = React.useRef<HTMLFormElement>(null);\n    const composedFormRef = useComposedRefs(forwardedRef, formRef);\n\n    // native validity per field\n    const [validityMap, setValidityMap] = React.useState<ValidityMap>({});\n    const getFieldValidity: ValidationContextValue['getFieldValidity'] = React.useCallback(\n      (fieldName) => validityMap[fieldName],\n      [validityMap]\n    );\n    const handleFieldValidityChange: ValidationContextValue['onFieldValidityChange'] =\n      React.useCallback(\n        (fieldName, validity) =>\n          setValidityMap((prevValidityMap) => ({\n            ...prevValidityMap,\n            [fieldName]: { ...(prevValidityMap[fieldName] ?? {}), ...validity },\n          })),\n        []\n      );\n    const handleFieldValiditionClear: ValidationContextValue['onFieldValiditionClear'] =\n      React.useCallback((fieldName) => {\n        setValidityMap((prevValidityMap) => ({ ...prevValidityMap, [fieldName]: undefined }));\n        setCustomErrorsMap((prevCustomErrorsMap) => ({ ...prevCustomErrorsMap, [fieldName]: {} }));\n      }, []);\n\n    // custom matcher entries per field\n    const [customMatcherEntriesMap, setCustomMatcherEntriesMap] =\n      React.useState<CustomMatcherEntriesMap>({});\n    const getFieldCustomMatcherEntries: ValidationContextValue['getFieldCustomMatcherEntries'] =\n      React.useCallback(\n        (fieldName) => customMatcherEntriesMap[fieldName] ?? [],\n        [customMatcherEntriesMap]\n      );\n    const handleFieldCustomMatcherAdd: ValidationContextValue['onFieldCustomMatcherEntryAdd'] =\n      React.useCallback((fieldName, matcherEntry) => {\n        setCustomMatcherEntriesMap((prevCustomMatcherEntriesMap) => ({\n          ...prevCustomMatcherEntriesMap,\n          [fieldName]: [...(prevCustomMatcherEntriesMap[fieldName] ?? []), matcherEntry],\n        }));\n      }, []);\n    const handleFieldCustomMatcherRemove: ValidationContextValue['onFieldCustomMatcherEntryRemove'] =\n      React.useCallback((fieldName, matcherEntryId) => {\n        setCustomMatcherEntriesMap((prevCustomMatcherEntriesMap) => ({\n          ...prevCustomMatcherEntriesMap,\n          [fieldName]: (prevCustomMatcherEntriesMap[fieldName] ?? []).filter(\n            (matcherEntry) => matcherEntry.id !== matcherEntryId\n          ),\n        }));\n      }, []);\n\n    // custom errors per field\n    const [customErrorsMap, setCustomErrorsMap] = React.useState<CustomErrorsMap>({});\n    const getFieldCustomErrors: ValidationContextValue['getFieldCustomErrors'] = React.useCallback(\n      (fieldName) => customErrorsMap[fieldName] ?? {},\n      [customErrorsMap]\n    );\n    const handleFieldCustomErrorsChange: ValidationContextValue['onFieldCustomErrorsChange'] =\n      React.useCallback((fieldName, customErrors) => {\n        setCustomErrorsMap((prevCustomErrorsMap) => ({\n          ...prevCustomErrorsMap,\n          [fieldName]: { ...(prevCustomErrorsMap[fieldName] ?? {}), ...customErrors },\n        }));\n      }, []);\n\n    // messageIds per field\n    const [messageIdsMap, setMessageIdsMap] = React.useState<MessageIdsMap>({});\n    const handleFieldMessageIdAdd: AriaDescriptionContextValue['onFieldMessageIdAdd'] =\n      React.useCallback((fieldName, id) => {\n        setMessageIdsMap((prevMessageIdsMap) => {\n          const fieldDescriptionIds = new Set(prevMessageIdsMap[fieldName]).add(id);\n          return { ...prevMessageIdsMap, [fieldName]: fieldDescriptionIds };\n        });\n      }, []);\n    const handleFieldMessageIdRemove: AriaDescriptionContextValue['onFieldMessageIdRemove'] =\n      React.useCallback((fieldName, id) => {\n        setMessageIdsMap((prevMessageIdsMap) => {\n          const fieldDescriptionIds = new Set(prevMessageIdsMap[fieldName]);\n          fieldDescriptionIds.delete(id);\n          return { ...prevMessageIdsMap, [fieldName]: fieldDescriptionIds };\n        });\n      }, []);\n    const getFieldDescription: AriaDescriptionContextValue['getFieldDescription'] =\n      React.useCallback(\n        (fieldName) => Array.from(messageIdsMap[fieldName] ?? []).join(' ') || undefined,\n        [messageIdsMap]\n      );\n\n    return (\n      <ValidationProvider\n        scope={__scopeForm}\n        getFieldValidity={getFieldValidity}\n        onFieldValidityChange={handleFieldValidityChange}\n        getFieldCustomMatcherEntries={getFieldCustomMatcherEntries}\n        onFieldCustomMatcherEntryAdd={handleFieldCustomMatcherAdd}\n        onFieldCustomMatcherEntryRemove={handleFieldCustomMatcherRemove}\n        getFieldCustomErrors={getFieldCustomErrors}\n        onFieldCustomErrorsChange={handleFieldCustomErrorsChange}\n        onFieldValiditionClear={handleFieldValiditionClear}\n      >\n        <AriaDescriptionProvider\n          scope={__scopeForm}\n          onFieldMessageIdAdd={handleFieldMessageIdAdd}\n          onFieldMessageIdRemove={handleFieldMessageIdRemove}\n          getFieldDescription={getFieldDescription}\n        >\n          <Primitive.form\n            {...rootProps}\n            ref={composedFormRef}\n            // focus first invalid control when the form is submitted\n            onInvalid={composeEventHandlers(props.onInvalid, (event) => {\n              const firstInvalidControl = getFirstInvalidControl(event.currentTarget);\n              if (firstInvalidControl === event.target) firstInvalidControl.focus();\n\n              // prevent default browser UI for form validation\n              event.preventDefault();\n            })}\n            // clear server errors when the form is re-submitted\n            onSubmit={composeEventHandlers(props.onSubmit, onClearServerErrors, {\n              checkForDefaultPrevented: false,\n            })}\n            // clear server errors when the form is reset\n            onReset={composeEventHandlers(props.onReset, onClearServerErrors)}\n          />\n        </AriaDescriptionProvider>\n      </ValidationProvider>\n    );\n  }\n);\n\nForm.displayName = FORM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * FormField\n * -----------------------------------------------------------------------------------------------*/\n\nconst FIELD_NAME = 'FormField';\n\ntype FormFieldContextValue = {\n  id: string;\n  name: string;\n  serverInvalid: boolean;\n};\nconst [FormFieldProvider, useFormFieldContext] =\n  createFormContext<FormFieldContextValue>(FIELD_NAME);\n\ntype FormFieldElement = React.ElementRef<typeof Primitive.div>;\ntype PrimitiveDivProps = React.ComponentPropsWithoutRef<typeof Primitive.div>;\ninterface FormFieldProps extends PrimitiveDivProps {\n  name: string;\n  serverInvalid?: boolean;\n}\n\nconst FormField = React.forwardRef<FormFieldElement, FormFieldProps>(\n  (props: ScopedProps<FormFieldProps>, forwardedRef) => {\n    const { __scopeForm, name, serverInvalid = false, ...fieldProps } = props;\n    const validationContext = useValidationContext(FIELD_NAME, __scopeForm);\n    const validity = validationContext.getFieldValidity(name);\n    const id = useId();\n\n    return (\n      <FormFieldProvider scope={__scopeForm} id={id} name={name} serverInvalid={serverInvalid}>\n        <Primitive.div\n          data-valid={getValidAttribute(validity, serverInvalid)}\n          data-invalid={getInvalidAttribute(validity, serverInvalid)}\n          {...fieldProps}\n          ref={forwardedRef}\n        />\n      </FormFieldProvider>\n    );\n  }\n);\n\nFormField.displayName = FIELD_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * FormLabel\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'FormLabel';\n\ntype FormLabelElement = React.ElementRef<typeof LabelPrimitive>;\ntype LabelProps = React.ComponentPropsWithoutRef<typeof LabelPrimitive>;\ninterface FormLabelProps extends LabelProps {}\n\nconst FormLabel = React.forwardRef<FormLabelElement, FormLabelProps>(\n  (props: ScopedProps<FormLabelProps>, forwardedRef) => {\n    const { __scopeForm, ...labelProps } = props;\n    const validationContext = useValidationContext(LABEL_NAME, __scopeForm);\n    const fieldContext = useFormFieldContext(LABEL_NAME, __scopeForm);\n    const htmlFor = labelProps.htmlFor || fieldContext.id;\n    const validity = validationContext.getFieldValidity(fieldContext.name);\n\n    return (\n      <LabelPrimitive\n        data-valid={getValidAttribute(validity, fieldContext.serverInvalid)}\n        data-invalid={getInvalidAttribute(validity, fieldContext.serverInvalid)}\n        {...labelProps}\n        ref={forwardedRef}\n        htmlFor={htmlFor}\n      />\n    );\n  }\n);\n\nFormLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * FormControl\n * -----------------------------------------------------------------------------------------------*/\n\nconst CONTROL_NAME = 'FormControl';\n\ntype FormControlElement = React.ElementRef<typeof Primitive.input>;\ntype PrimitiveInputProps = React.ComponentPropsWithoutRef<typeof Primitive.input>;\ninterface FormControlProps extends PrimitiveInputProps {}\n\nconst FormControl = React.forwardRef<FormControlElement, FormControlProps>(\n  (props: ScopedProps<FormControlProps>, forwardedRef) => {\n    const { __scopeForm, ...controlProps } = props;\n\n    const validationContext = useValidationContext(CONTROL_NAME, __scopeForm);\n    const fieldContext = useFormFieldContext(CONTROL_NAME, __scopeForm);\n    const ariaDescriptionContext = useAriaDescriptionContext(CONTROL_NAME, __scopeForm);\n\n    const ref = React.useRef<FormControlElement>(null);\n    const composedRef = useComposedRefs(forwardedRef, ref);\n    const name = controlProps.name || fieldContext.name;\n    const id = controlProps.id || fieldContext.id;\n    const customMatcherEntries = validationContext.getFieldCustomMatcherEntries(name);\n\n    const { onFieldValidityChange, onFieldCustomErrorsChange, onFieldValiditionClear } =\n      validationContext;\n    const updateControlValidity = React.useCallback(\n      async (control: FormControlElement) => {\n        //------------------------------------------------------------------------------------------\n        // 1. first, if we have built-in errors we stop here\n\n        if (hasBuiltInError(control.validity)) {\n          const controlValidity = validityStateToObject(control.validity);\n          onFieldValidityChange(name, controlValidity);\n          return;\n        }\n\n        //------------------------------------------------------------------------------------------\n        // 2. then gather the form data to give to custom matchers for cross-comparisons\n\n        const formData = control.form ? new FormData(control.form) : new FormData();\n        const matcherArgs: CustomMatcherArgs = [control.value, formData];\n\n        //------------------------------------------------------------------------------------------\n        // 3. split sync and async custom matcher entries\n\n        const syncCustomMatcherEntries: Array<SyncCustomMatcherEntry> = [];\n        const ayncCustomMatcherEntries: Array<AsyncCustomMatcherEntry> = [];\n        customMatcherEntries.forEach((customMatcherEntry) => {\n          if (isAsyncCustomMatcherEntry(customMatcherEntry, matcherArgs)) {\n            ayncCustomMatcherEntries.push(customMatcherEntry);\n          } else if (isSyncCustomMatcherEntry(customMatcherEntry)) {\n            syncCustomMatcherEntries.push(customMatcherEntry);\n          }\n        });\n\n        //------------------------------------------------------------------------------------------\n        // 4. run sync custom matchers and update control validity / internal validity + errors\n\n        const syncCustomErrors = syncCustomMatcherEntries.map(({ id, match }) => {\n          return [id, match(...matcherArgs)] as const;\n        });\n        const syncCustomErrorsById = Object.fromEntries(syncCustomErrors);\n        const hasSyncCustomErrors = Object.values(syncCustomErrorsById).some(Boolean);\n        const hasCustomError = hasSyncCustomErrors;\n        control.setCustomValidity(hasCustomError ? DEFAULT_INVALID_MESSAGE : '');\n        const controlValidity = validityStateToObject(control.validity);\n        onFieldValidityChange(name, controlValidity);\n        onFieldCustomErrorsChange(name, syncCustomErrorsById);\n\n        //------------------------------------------------------------------------------------------\n        // 5. run async custom matchers and update control validity / internal validity + errors\n\n        if (!hasSyncCustomErrors && ayncCustomMatcherEntries.length > 0) {\n          const promisedCustomErrors = ayncCustomMatcherEntries.map(({ id, match }) =>\n            match(...matcherArgs).then((matches) => [id, matches] as const)\n          );\n          const asyncCustomErrors = await Promise.all(promisedCustomErrors);\n          const asyncCustomErrorsById = Object.fromEntries(asyncCustomErrors);\n          const hasAsyncCustomErrors = Object.values(asyncCustomErrorsById).some(Boolean);\n          const hasCustomError = hasAsyncCustomErrors;\n          control.setCustomValidity(hasCustomError ? DEFAULT_INVALID_MESSAGE : '');\n          const controlValidity = validityStateToObject(control.validity);\n          onFieldValidityChange(name, controlValidity);\n          onFieldCustomErrorsChange(name, asyncCustomErrorsById);\n        }\n      },\n      [customMatcherEntries, name, onFieldCustomErrorsChange, onFieldValidityChange]\n    );\n\n    React.useEffect(() => {\n      const control = ref.current;\n      if (control) {\n        // We only want validate on change (native `change` event, not React's `onChange`). This is primarily\n        // a UX decision, we don't want to validate on every keystroke and React's `onChange` is the `input` event.\n        const handleChange = () => updateControlValidity(control);\n        control.addEventListener('change', handleChange);\n        return () => control.removeEventListener('change', handleChange);\n      }\n    }, [updateControlValidity]);\n\n    const resetControlValidity = React.useCallback(() => {\n      const control = ref.current;\n      if (control) {\n        control.setCustomValidity('');\n        onFieldValiditionClear(name);\n      }\n    }, [name, onFieldValiditionClear]);\n\n    // reset validity and errors when the form is reset\n    React.useEffect(() => {\n      const form = ref.current?.form;\n      if (form) {\n        form.addEventListener('reset', resetControlValidity);\n        return () => form.removeEventListener('reset', resetControlValidity);\n      }\n    }, [resetControlValidity]);\n\n    // focus first invalid control when fields are set as invalid by server\n    React.useEffect(() => {\n      const control = ref.current;\n      const form = control?.closest('form');\n      if (form && fieldContext.serverInvalid) {\n        const firstInvalidControl = getFirstInvalidControl(form);\n        if (firstInvalidControl === control) firstInvalidControl.focus();\n      }\n    }, [fieldContext.serverInvalid]);\n\n    const validity = validationContext.getFieldValidity(name);\n\n    return (\n      <Primitive.input\n        data-valid={getValidAttribute(validity, fieldContext.serverInvalid)}\n        data-invalid={getInvalidAttribute(validity, fieldContext.serverInvalid)}\n        aria-invalid={fieldContext.serverInvalid ? true : undefined}\n        aria-describedby={ariaDescriptionContext.getFieldDescription(name)}\n        // disable default browser behaviour of showing built-in error message on hover\n        title=\"\"\n        {...controlProps}\n        ref={composedRef}\n        id={id}\n        name={name}\n        onInvalid={composeEventHandlers(props.onInvalid, (event) => {\n          const control = event.currentTarget;\n          updateControlValidity(control);\n        })}\n        onChange={composeEventHandlers(props.onChange, (event) => {\n          // reset validity when user changes value\n          resetControlValidity();\n        })}\n      />\n    );\n  }\n);\n\nFormControl.displayName = CONTROL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * FormMessage\n * -----------------------------------------------------------------------------------------------*/\n\nconst validityMatchers = [\n  'badInput',\n  'patternMismatch',\n  'rangeOverflow',\n  'rangeUnderflow',\n  'stepMismatch',\n  'tooLong',\n  'tooShort',\n  'typeMismatch',\n  'valid',\n  'valueMissing',\n] as const;\ntype ValidityMatcher = (typeof validityMatchers)[number];\n\nconst DEFAULT_INVALID_MESSAGE = 'This value is not valid';\nconst DEFAULT_BUILT_IN_MESSAGES: Record<ValidityMatcher, string | undefined> = {\n  badInput: DEFAULT_INVALID_MESSAGE,\n  patternMismatch: 'This value does not match the required pattern',\n  rangeOverflow: 'This value is too large',\n  rangeUnderflow: 'This value is too small',\n  stepMismatch: 'This value does not match the required step',\n  tooLong: 'This value is too long',\n  tooShort: 'This value is too short',\n  typeMismatch: 'This value does not match the required type',\n  valid: undefined,\n  valueMissing: 'This value is missing',\n};\n\nconst MESSAGE_NAME = 'FormMessage';\n\ntype FormMessageElement = FormMessageImplElement;\ninterface FormMessageProps extends Omit<FormMessageImplProps, 'name'> {\n  match?: ValidityMatcher | CustomMatcher;\n  forceMatch?: boolean;\n  name?: string;\n}\n\nconst FormMessage = React.forwardRef<FormMessageElement, FormMessageProps>(\n  (props: ScopedProps<FormMessageProps>, forwardedRef) => {\n    const { match, name: nameProp, ...messageProps } = props;\n    const fieldContext = useFormFieldContext(MESSAGE_NAME, props.__scopeForm);\n    const name = nameProp ?? fieldContext.name;\n\n    if (match === undefined) {\n      return (\n        <FormMessageImpl {...messageProps} ref={forwardedRef} name={name}>\n          {props.children || DEFAULT_INVALID_MESSAGE}\n        </FormMessageImpl>\n      );\n    } else if (typeof match === 'function') {\n      return <FormCustomMessage match={match} {...messageProps} ref={forwardedRef} name={name} />;\n    } else {\n      return <FormBuiltInMessage match={match} {...messageProps} ref={forwardedRef} name={name} />;\n    }\n  }\n);\n\nFormMessage.displayName = MESSAGE_NAME;\n\ntype FormBuiltInMessageElement = FormMessageImplElement;\ninterface FormBuiltInMessageProps extends FormMessageImplProps {\n  match: ValidityMatcher;\n  forceMatch?: boolean;\n  name: string;\n}\n\nconst FormBuiltInMessage = React.forwardRef<FormBuiltInMessageElement, FormBuiltInMessageProps>(\n  (props: ScopedProps<FormBuiltInMessageProps>, forwardedRef) => {\n    const { match, forceMatch = false, name, children, ...messageProps } = props;\n    const validationContext = useValidationContext(MESSAGE_NAME, messageProps.__scopeForm);\n    const validity = validationContext.getFieldValidity(name);\n    const matches = forceMatch || validity?.[match];\n\n    if (matches) {\n      return (\n        <FormMessageImpl ref={forwardedRef} {...messageProps} name={name}>\n          {children ?? DEFAULT_BUILT_IN_MESSAGES[match]}\n        </FormMessageImpl>\n      );\n    }\n\n    return null;\n  }\n);\n\ntype FormCustomMessageElement = React.ElementRef<typeof FormMessageImpl>;\ninterface FormCustomMessageProps extends React.ComponentPropsWithoutRef<typeof FormMessageImpl> {\n  match: CustomMatcher;\n  forceMatch?: boolean;\n  name: string;\n}\n\nconst FormCustomMessage = React.forwardRef<FormCustomMessageElement, FormCustomMessageProps>(\n  (props: ScopedProps<FormCustomMessageProps>, forwardedRef) => {\n    const { match, forceMatch = false, name, id: idProp, children, ...messageProps } = props;\n    const validationContext = useValidationContext(MESSAGE_NAME, messageProps.__scopeForm);\n    const ref = React.useRef<FormCustomMessageElement>(null);\n    const composedRef = useComposedRefs(forwardedRef, ref);\n    const _id = useId();\n    const id = idProp ?? _id;\n\n    const customMatcherEntry = React.useMemo(() => ({ id, match }), [id, match]);\n    const { onFieldCustomMatcherEntryAdd, onFieldCustomMatcherEntryRemove } = validationContext;\n    React.useEffect(() => {\n      onFieldCustomMatcherEntryAdd(name, customMatcherEntry);\n      return () => onFieldCustomMatcherEntryRemove(name, customMatcherEntry.id);\n    }, [customMatcherEntry, name, onFieldCustomMatcherEntryAdd, onFieldCustomMatcherEntryRemove]);\n\n    const validity = validationContext.getFieldValidity(name);\n    const customErrors = validationContext.getFieldCustomErrors(name);\n    const hasMatchingCustomError = customErrors[id];\n    const matches =\n      forceMatch || (validity && !hasBuiltInError(validity) && hasMatchingCustomError);\n\n    if (matches) {\n      return (\n        <FormMessageImpl id={id} ref={composedRef} {...messageProps} name={name}>\n          {children ?? DEFAULT_INVALID_MESSAGE}\n        </FormMessageImpl>\n      );\n    }\n\n    return null;\n  }\n);\n\ntype FormMessageImplElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = React.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface FormMessageImplProps extends PrimitiveSpanProps {\n  name: string;\n}\n\nconst FormMessageImpl = React.forwardRef<FormMessageImplElement, FormMessageImplProps>(\n  (props: ScopedProps<FormMessageImplProps>, forwardedRef) => {\n    const { __scopeForm, id: idProp, name, ...messageProps } = props;\n    const ariaDescriptionContext = useAriaDescriptionContext(MESSAGE_NAME, __scopeForm);\n    const _id = useId();\n    const id = idProp ?? _id;\n\n    const { onFieldMessageIdAdd, onFieldMessageIdRemove } = ariaDescriptionContext;\n    React.useEffect(() => {\n      onFieldMessageIdAdd(name, id);\n      return () => onFieldMessageIdRemove(name, id);\n    }, [name, id, onFieldMessageIdAdd, onFieldMessageIdRemove]);\n\n    return <Primitive.span id={id} {...messageProps} ref={forwardedRef} />;\n  }\n);\n\n/* -------------------------------------------------------------------------------------------------\n * FormValidityState\n * -----------------------------------------------------------------------------------------------*/\n\nconst VALIDITY_STATE_NAME = 'FormValidityState';\n\ninterface FormValidityStateProps {\n  children(validity: ValidityState | undefined): React.ReactNode;\n  name?: string;\n}\n\nconst FormValidityState = (props: ScopedProps<FormValidityStateProps>) => {\n  const { __scopeForm, name: nameProp, children } = props;\n  const validationContext = useValidationContext(VALIDITY_STATE_NAME, __scopeForm);\n  const fieldContext = useFormFieldContext(VALIDITY_STATE_NAME, __scopeForm);\n  const name = nameProp ?? fieldContext.name;\n  const validity = validationContext.getFieldValidity(name);\n  return <>{children(validity)}</>;\n};\n\nFormValidityState.displayName = VALIDITY_STATE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * FormSubmit\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUBMIT_NAME = 'FormSubmit';\n\ntype FormSubmitElement = React.ElementRef<typeof Primitive.button>;\ntype PrimitiveButtonProps = React.ComponentPropsWithoutRef<typeof Primitive.button>;\ninterface FormSubmitProps extends PrimitiveButtonProps {}\n\nconst FormSubmit = React.forwardRef<FormSubmitElement, FormSubmitProps>(\n  (props: ScopedProps<FormSubmitProps>, forwardedRef) => {\n    const { __scopeForm, ...submitProps } = props;\n    return <Primitive.button type=\"submit\" {...submitProps} ref={forwardedRef} />;\n  }\n);\n\nFormSubmit.displayName = SUBMIT_NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\ntype ValidityStateKey = keyof ValidityState;\ntype SyncCustomMatcher = (value: string, formData: FormData) => boolean;\ntype AsyncCustomMatcher = (value: string, formData: FormData) => Promise<boolean>;\ntype CustomMatcher = SyncCustomMatcher | AsyncCustomMatcher;\ntype CustomMatcherEntry = { id: string; match: CustomMatcher };\ntype SyncCustomMatcherEntry = { id: string; match: SyncCustomMatcher };\ntype AsyncCustomMatcherEntry = { id: string; match: AsyncCustomMatcher };\ntype CustomMatcherArgs = [string, FormData];\n\nfunction validityStateToObject(validity: ValidityState) {\n  const object: any = {};\n  for (const key in validity) {\n    object[key] = validity[key as ValidityStateKey];\n  }\n  return object as Record<ValidityStateKey, boolean>;\n}\n\nfunction isHTMLElement(element: any): element is HTMLElement {\n  return element instanceof HTMLElement;\n}\n\nfunction isFormControl(element: any): element is { validity: ValidityState } {\n  return 'validity' in element;\n}\n\nfunction isInvalid(control: HTMLElement) {\n  return (\n    isFormControl(control) &&\n    (control.validity.valid === false || control.getAttribute('aria-invalid') === 'true')\n  );\n}\n\nfunction getFirstInvalidControl(form: HTMLFormElement): HTMLElement | undefined {\n  const elements = form.elements;\n  const [firstInvalidControl] = Array.from(elements).filter(isHTMLElement).filter(isInvalid);\n  return firstInvalidControl;\n}\n\nfunction isAsyncCustomMatcherEntry(\n  entry: CustomMatcherEntry,\n  args: CustomMatcherArgs\n): entry is AsyncCustomMatcherEntry {\n  return entry.match.constructor.name === 'AsyncFunction' || returnsPromise(entry.match, args);\n}\n\nfunction isSyncCustomMatcherEntry(entry: CustomMatcherEntry): entry is SyncCustomMatcherEntry {\n  return entry.match.constructor.name === 'Function';\n}\n\nfunction returnsPromise(func: Function, args: Array<unknown>) {\n  return func(...args) instanceof Promise;\n}\n\nfunction hasBuiltInError(validity: ValidityState) {\n  let error = false;\n  for (const validityKey in validity) {\n    const key = validityKey as ValidityStateKey;\n    if (key !== 'valid' && key !== 'customError' && validity[key]) {\n      error = true;\n      break;\n    }\n  }\n  return error;\n}\n\nfunction getValidAttribute(validity: ValidityState | undefined, serverInvalid: boolean) {\n  if (validity?.valid === true && !serverInvalid) return true;\n  return undefined;\n}\nfunction getInvalidAttribute(validity: ValidityState | undefined, serverInvalid: boolean) {\n  if (validity?.valid === false || serverInvalid) return true;\n  return undefined;\n}\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst Root = Form;\nconst Field = FormField;\nconst Label = FormLabel;\nconst Control = FormControl;\nconst Message = FormMessage;\nconst ValidityState = FormValidityState;\nconst Submit = FormSubmit;\n\nexport {\n  createFormScope,\n  //\n  Form,\n  FormField,\n  FormLabel,\n  FormControl,\n  FormMessage,\n  FormValidityState,\n  FormSubmit,\n  //\n  Root,\n  Field,\n  Label,\n  Control,\n  Message,\n  ValidityState,\n  Submit,\n};\n\nexport type {\n  FormProps,\n  FormFieldProps,\n  FormLabelProps,\n  FormControlProps,\n  FormMessageProps,\n  FormValidityStateProps,\n  FormSubmitProps,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}